<%- include('../../partials/head') %>
<%- include('../../partials/header') %>

<!------MAIN TITLE------>
<div class="mainTitle">DETALLE DE PEDIDOS EN CURSO</div>

<!------GENERAL ACTIONS------>
<div class="divGeneralActions" id="DGAordersDetails">
    <div class="divGeneralAction" id="DGAaddProduct">
        <i class="fa-solid fa-plus"></i>
        <div class="showActionPopup">
            Asignación masiva
        </div>        
    </div>
</div>

<!--------GENERAL FILTERS-------->
<div class="mainFilters">
    <div class="divInputsRow">
        <div class="divInput">
            <label class="label1" id="filterOrderLabel">Pedido</label>
            <input type="text" class="input1 inputS" id="filterOrder">
            <ul class="predictedElements" id="ulPredictedOrders"></ul>
        </div>
        <div class="divInput">
            <label class="label1" id="filterCustomerLabel">Cliente</label>
            <input type="text" class="input1 inputXL" id="filterCustomer">
            <ul class="predictedElements" id="ulPredictedCustomers"></ul>
        </div>
        <div class="divInput">
            <label class="label1" id="filterProductLabel">Producto</label>
            <input type="text" class="input1 inputXXXL" id="filterProduct">
            <ul class="predictedElements" id="ulPredictedProducts"></ul>
        </div>        
        <div class="divInput">
            <label class="label1">Estado</label>
            <select id="filterOrderStatus" class="input1 inputM">
                <option value="default"></option>
                <option value="complete">Completo</option>
                <option value="incomplete">Incompleto</option>
            </select>
        </div>
        <div class="divInput">
            <label class="label1">Encargado</label>
            <select id="filterOrderManager" class="input1 sxl">
                <option value="default"></option>
                <% ordersManagers.forEach(manager => { %>
                    <option value="<%= manager.id %>">
                        <%= manager.order_manager_name %>
                    </option>
                <% }) %>
            </select>
        </div>
        <div id="unfilterOrdersDetails" class="unfilterIcon" >
            <i class="fa-solid fa-filter-circle-xmark"></i>
        </div>
    </div>    
</div>

<!---------ORDERS DETAILS TABLE--------->
<div class="mtl">
    <div class="divTable">

        <div class="tableInfo" id="elppInfo">Editar línea</div>
        <div class="tableInfo" id="dlppInfo">Eliminar línea</div>
        <div class="tableInfo" id="loppInfo">Ver observ.</div>
        
        <table>
            <thead>
                <tr>
                    <th class="theadCss wXS thLeftBorder thTall"># Pedido</th>
                    <th class="theadCss wXS thTall">Fecha</th>
                    <th class="theadCss wXS thTall">Canal</th>
                    <th class="theadCss wM thTall">Cliente</th>
                    <th class="theadCss wXXL thTall">Producto</th>
                    <th class="theadCss wXXS thTall">Talle</th>
                    <th class="theadCss wM thTall">Color</th>
                    <th class="theadCss wXS thTall">Precio</th>
                    <th class="theadCss wXS thTall">Cantidad solicitada</th>
                    <th class="theadCss wXS thTall">Cantidad confirmada</th>  
                    <th class="theadCss wS thTall">Estado</th>
                    <th class="theadCss wM thTall">Encargado</th>                    
                    <th class="theadCss wXXS thTall"><i class="fa-regular fa-pen-to-square tableIcon" id="elppIcon"></i></th>
                    <th class="theadCss wXXS thTall"><i class="fa-regular fa-comment tableIcon" id="loppIcon"></i></th>

                    <th class="theadCss wXXS thTall thRightBorder"><i class="fa-regular fa-trash-can tableIcon" id="dlppIcon"></i></th>
                </tr>
            </thead>
            <tbody id="bodyOrdersDetails"></tbody>
        </table>
    </div>
    
</div>

<!----------LOADER---------->
<div class="loader" id="ordersDetailsLoader" ></div>

<%- include('./ordersDetailsPopups') %>
<script type="module" src="/js/sales/orders/ordersDetails.js"></script>

