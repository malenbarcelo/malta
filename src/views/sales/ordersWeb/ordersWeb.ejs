<%- include('../../partials/head') %>
<%- include('../../partials/header') %>

<!------MAIN TITLE------>
<div class="mainTitle mbm">
    WEB - RESUMEN DE PEDIDOS EN CURSO
    <div class="divCheckbox1 mbm" id="showCanceledDiv">
        <input type="checkbox" id="showCanceled">
        <label>Mostrar cancelados</label><br>
    </div>    
</div>

<!------GENERAL ACTIONS------>
<div class="divGeneralActions" id="DGAorders">
    <div class="divGeneralAction notVisible"id="DGAregisterPayment">
        <i class="fa-regular fa-credit-card"></i>
        <div class="showActionPopup">
            Registrar pago
        </div>
    </div>
    <div class="divGeneralAction notVisible" id="DGAmovementsDetails">
        <i class="fa-solid fa-magnifying-glass-plus"></i>
        <div class="showActionPopup">
            Detalle de movimientos
        </div>
    </div>
    <div class="divGeneralAction notVisible" id="DGAbalance">
        <i class="fa-solid fa-circle-info"></i>
        <div class="showActionPopup">
            Resumen de saldo
        </div>
    </div>
    <div class="divGeneralAction">
        <i class="fa-brands fa-whatsapp"></i>
        <div class="showActionPopup">
            Solicitar pagos
        </div>
    </div>
</div>

<!--------GENERAL FILTERS-------->
<div class="mainFilters">
    <div class="divInputsRow">            
        <div class="divInput">
            <label class="label1" id="customerLabel">Cliente</label>
            <input type="text" id="customer" class="input1 im ips" autocomplete="off">
            <ul class="predictedElements" id="ulPredictedCustomers"></ul>
        </div>
        <div class="divInput">
            <label for="selectOrder" class="label1"># Pedido</label>
            <input type="text" id="orderNumber" class="input1 ixs ips" autocomplete="off">
        </div>
        <div class="divInput">
            <label class="label1">Tipo</label>
            <select id="salesChannel" class="input1 ixs ips">
                <option value=""></option>
                <option value="Abona y retira">Abona y retira</option>
                <option value="Transferencia">Transferencia</option>
            </select>
        </div>
        <div class="divInput">
            <label for="selectOrderStatus" class="label1">Estado</label>
            <select name="selectOrderStatus" id="orderStatus" class="input1 ixs ips">
                <option value=""></option>
                <% ordersStatus.forEach(status => { %>
                    <option value="<%= status.id %>">
                        <%= status.order_status %>
                    </option>
                <% }) %>                
            </select>
        </div>
        <div class="divInput">
            <label for="selectPaymentStatus" class="label1">Estado del pago</label>
            <select name="selectPaymentStatus" id="paymentStatus" class="input1 is ips">
                <option value=""></option>
                <% paymentsStatus.forEach(status => { %>
                    <option value="<%= status.id %>">
                        <%= status.payment_status %>
                    </option>
                <% }) %>                
            </select>
        </div>
        <div id="unfilterOrders">
            <i class="fa-solid fa-filter-circle-xmark"></i>
        </div>
    </div>    
</div>

<!--------TABLE DATA-------->
<div class="tableSummary">    
    <div id="summaryTotal"></div>
    <div id="summaryAmountPaid"></div>
    <div id="summaryBalance"></div>
    <div id="summaryPositiveBalance"></div> 
    <div id="summaryNotes"></div>    
</div>

<!---------ORDERS TABLE--------->
<div class="mts">
    <div class="divTable" id="ordersTable">
        <div class="tableInfo" id="eoppInfo">Editar pedido</div>
        <div class="tableInfo" id="rpppInfo">Registrar pago</div>
        <div class="tableInfo" id="obppInfo">Observaciones</div>
        <div class="tableInfo" id="coppInfo">Cancelar orden</div>
        
        <table>
            <thead>
                <tr>
                    <th class="theadCss wXS thLeftBorder thTall"># Pedido</th>
                    <th class="theadCss wXXS thTall">Temp.</th>
                    <th class="theadCss wXS thTall">Fecha</th>
                    <th class="theadCss wM thTall">Cliente</th>
                    <th class="theadCss wS thTall">Tipo</th>
                    <th class="theadCss wS thTall">Subtotal</th>
                    <th class="theadCss wXS thTall">Fee</th>
                    <th class="theadCss wXS thTall">Env√≠o</th>
                    <th class="theadCss wS thTall">Total</th>
                    <th class="theadCss wXS thTall">Pagado</th>
                    <th class="theadCss wS thTall">Saldo</th>                    
                    <th class="theadCss wXS thTall">Estado</th>
                    <th class="theadCss wS thTall">Pago</th>
                    <th class="theadCss wXXS thTall"><i class="fa-regular fa-pen-to-square tableIcon" id="eoppIcon"></i></th>
                    <th class="theadCss wXXS thTall"><i class="fa-regular fa-credit-card tableIcon" id="rpppIcon"></i></th>
                    <th class="theadCss wXXS thTall"><i class="fa-regular fa-comment tableIcon" id="obppIcon"></i></th>
                    <th class="theadCss wXXS thTall thRightBorder"><i class="fa-regular fa-circle-xmark tableIcon" id="coppIcon"></i></th>
                </tr>
            </thead>
            <tbody id="body"></tbody>
        </table>
        
    </div>
    
</div>

<!----------LOADER---------->
<div class="loader loader-btm" id="loader" ></div>

<!----------POPUPS---------->


<!----------SCRIPTS---------->
<script type="module" src="/js/sales/ordersWeb/ordersWeb.js"></script>
